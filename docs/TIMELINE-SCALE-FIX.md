# ğŸ”§ æ—¶é—´è½´åˆ»åº¦å’Œå·¥å…·æ ä¿®å¤

**ä¿®å¤æ—¶é—´**: 2026-02-03 15:50  
**ç‰ˆæœ¬**: v2.1.0  
**çŠ¶æ€**: âœ… å®Œæˆ

---

## ğŸ¯ ä¿®å¤ç›®æ ‡

æ ¹æ®åŸé¡¹ç›®æ•ˆæœå›¾ï¼Œè°ƒæ•´ï¼š
1. âœ… æ—¶é—´è½´åˆ»åº¦æ˜¾ç¤ºï¼ˆæ‰€æœ‰è§†å›¾éƒ½åŸºäº"å¤©"å•ä½ï¼‰
2. âœ… å¤´éƒ¨å·¥å…·æ å¸ƒå±€å’ŒåŠŸèƒ½
3. âœ… æ·»åŠ ç¼©æ”¾åŠŸèƒ½ï¼ˆ+/- æŒ‰é’®ï¼‰
4. âœ… æ·»åŠ "ä»Šå¤©"å®šä½åŠŸèƒ½

---

## ğŸ“Š æ—¶é—´è½´åˆ»åº¦è°ƒæ•´

### 1ï¸âƒ£ **ç»Ÿä¸€æ˜¾ç¤ºè§„åˆ™** âœ…

**åŸåˆ™**: æ‰€æœ‰è§†å›¾éƒ½ä»¥"å¤©"ä¸ºåŸºæœ¬å•ä½ï¼Œåªæ˜¯æ˜¾ç¤ºç²’åº¦ä¸åŒ

| è§†å›¾ | æ˜¾ç¤ºæ ¼å¼ | ç¤ºä¾‹ | åˆ—å®½ |
|------|----------|------|------|
| **å¤©** | æ—¥æœŸæ•°å­— | `6`, `7`, `8` | 40px |
| **å‘¨** | æ—¥æœŸèŒƒå›´ | `12-18`, `19-25` | 280px |
| **åŒå‘¨** | æ—¥æœŸèŒƒå›´ | `1/12-25`, `1/26-8` | 560px |
| **æœˆ** | å¹´æœˆ | `26å¹´1æœˆ`, `26å¹´2æœˆ` | 1200px |
| **å­£åº¦** | å­£åº¦ | `Q3`, `Q4`, `Q1` | 3640px |

---

### 2ï¸âƒ£ **formatDateHeader å®ç°** âœ…

**æ–‡ä»¶**: `src/utils/dateUtils.ts`

```typescript
export const formatDateHeader = (date: Date, scale: TimeScale): string => {
  switch (scale) {
    case 'day':
      // æ—¥è§†å›¾ï¼šæ˜¾ç¤ºæ—¥æœŸæ•°å­—ï¼ˆ1-31ï¼‰
      return format(date, 'd', { locale: zhCN });
      
    case 'week': {
      // å‘¨è§†å›¾ï¼šæ˜¾ç¤ºå‘¨èŒƒå›´ï¼ˆå¦‚ 12-18, 19-25ï¼‰
      const weekEnd = addDays(date, 6);
      const startDay = format(date, 'd');
      const endDay = format(weekEnd, 'd');
      return `${startDay}-${endDay}`;
    }
    
    case 'biweekly': {
      // åŒå‘¨è§†å›¾ï¼šæ˜¾ç¤ºåŒå‘¨èŒƒå›´ï¼ˆå¦‚ 1/12-25ï¼‰
      const biweekEnd = addDays(date, 13);
      const startDate = format(date, 'M/d');
      const endDay = format(biweekEnd, 'd');
      return `${startDate}-${endDay}`;
    }
    
    case 'month':
      // æœˆè§†å›¾ï¼šæ˜¾ç¤ºæœˆä»½ï¼ˆ26å¹´1æœˆï¼‰- æŒ‰åŸé¡¹ç›®æ ¼å¼
      const year = format(date, 'yy', { locale: zhCN });
      const month = format(date, 'Mæœˆ', { locale: zhCN });
      return `${year}å¹´${month}`;
      
    case 'quarter': {
      // å­£åº¦è§†å›¾ï¼šæ˜¾ç¤ºå­£åº¦ï¼ˆQ1, Q2ï¼‰
      const quarter = Math.ceil((date.getMonth() + 1) / 3);
      return `Q${quarter}`;
    }
    
    default:
      return format(date, 'yyyyå¹´Mæœˆ', { locale: zhCN });
  }
};
```

**æ”¹è¿›ç‚¹**:
- âœ… æœˆè§†å›¾ï¼š`2026å¹´1æœˆ` â†’ `26å¹´1æœˆ`ï¼ˆæ›´ç®€æ´ï¼‰
- âœ… æ‰€æœ‰è§†å›¾ï¼šç»Ÿä¸€åŸºäº"å¤©"ä¸ºå•ä½
- âœ… æ—¥æœŸæ ¼å¼ï¼šä¸åŸé¡¹ç›®å®Œå…¨ä¸€è‡´

---

### 3ï¸âƒ£ **æ—¶é—´è½´è¡¨å¤´å¢å¼º** âœ…

**æ–‡ä»¶**: `src/components/timeline/TimelinePanel.tsx`

**æ–°å¢åŠŸèƒ½**:

```typescript
{dateHeaders.map((date, index) => {
  const columnWidth = getScaleUnit(scale);
  const isWeekend = date.getDay() === 0 || date.getDay() === 6;  // âœ… å‘¨æœ«æ£€æµ‹
  
  return (
    <div style={{
      backgroundColor: isWeekend && scale === 'day' 
        ? token.colorBgLayout    // âœ… å‘¨æœ«ä½¿ç”¨ç°è‰²èƒŒæ™¯
        : 'transparent',
      color: isWeekend && scale === 'day' 
        ? token.colorTextSecondary  // âœ… å‘¨æœ«æ–‡å­—é¢œè‰²å˜æ·¡
        : token.colorText,
    }}>
      {/* æ—¥æœŸæ ‡ç­¾ */}
      <div style={{ fontWeight: 500 }}>
        {formatDateHeader(date, scale)}
      </div>
      
      {/* æœˆä»½æ ‡ç­¾ï¼ˆä»…åœ¨æ—¥è§†å›¾ä¸”æ¯æœˆç¬¬ä¸€å¤©æ˜¾ç¤ºï¼‰ */}
      {scale === 'day' && date.getDate() === 1 && (
        <div style={{ fontSize: 10, color: token.colorTextTertiary }}>
          {format(date, 'Mæœˆ', { locale: zhCN })}
        </div>
      )}
    </div>
  );
})}
```

**æ”¹è¿›ç‚¹**:
- âœ… **å‘¨æœ«é«˜äº®** - æ—¥è§†å›¾ä¸­å‘¨æœ«ä½¿ç”¨ç°è‰²èƒŒæ™¯
- âœ… **æœˆä»½æ ‡è®°** - æ—¥è§†å›¾ä¸­æ¯æœˆç¬¬ä¸€å¤©æ˜¾ç¤ºæœˆä»½æ ‡ç­¾
- âœ… **æ¸…æ™°å±‚çº§** - æ—¥æœŸåŠ ç²—æ˜¾ç¤º

---

## ğŸ¨ å·¥å…·æ é‡æ–°è®¾è®¡

### 1ï¸âƒ£ **æ–°å·¥å…·æ å¸ƒå±€** âœ…

**æŒ‰åŸé¡¹ç›®æ•ˆæœå›¾è°ƒæ•´**:

```
[è¿”å›] [æ ‡é¢˜ï¼ˆå¯ç¼–è¾‘ï¼‰] ........................... [è´Ÿè´£äºº]
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
[ç¼–è¾‘å›¾] [Timeline] [èŠ‚ç‚¹] [å…³é”®è·¯å¾„] ... [æ’¤é”€] [é‡åš] [ä¿å­˜] | [ä»Šå¤©] [+] [-] [å¤© å‘¨ åŒå‘¨ æœˆ å­£åº¦] [ç”˜ç‰¹å›¾â–¼] [è¡¨æ ¼] [çŸ©é˜µ] [è¿­ä»£è§„åˆ’] [ç‰ˆæœ¬å¯¹æ¯”]
```

---

### 2ï¸âƒ£ **æ–°å¢åŠŸèƒ½** âœ…

#### **ä»Šå¤©å®šä½æŒ‰é’®** âœ…

```typescript
/**
 * å®šä½åˆ°ä»Šå¤©
 */
const scrollToToday = useCallback(() => {
  if (!scrollContainerRef.current) return;
  
  const today = new Date();
  const position = getPositionFromDate(today, normalizedViewStartDate, scale);
  
  // æ»šåŠ¨åˆ°ä»Šå¤©çš„ä½ç½®ï¼Œå±…ä¸­æ˜¾ç¤º
  const containerWidth = scrollContainerRef.current.clientWidth;
  const scrollLeft = Math.max(0, position - containerWidth / 2 + SIDEBAR_WIDTH);
  
  scrollContainerRef.current.scrollTo({
    left: scrollLeft,
    behavior: 'smooth',
  });
}, [normalizedViewStartDate, scale]);

// ä½¿ç”¨
<Button size="small" onClick={scrollToToday}>
  ä»Šå¤©
</Button>
```

**åŠŸèƒ½**: ç‚¹å‡»åç”»å¸ƒè‡ªåŠ¨æ»šåŠ¨åˆ°ä»Šå¤©çš„ä½ç½®ï¼Œå±…ä¸­æ˜¾ç¤º

---

#### **ç¼©æ”¾åŠŸèƒ½ï¼ˆ+/- æŒ‰é’®ï¼‰** âœ…

```typescript
/**
 * ç¼©æ”¾ - æ”¾å¤§ï¼ˆå¢åŠ ç²¾åº¦ï¼‰
 * å­£åº¦ â†’ æœˆ â†’ åŒå‘¨ â†’ å‘¨ â†’ å¤©
 */
const handleZoomIn = useCallback(() => {
  const scaleOrder: TimeScale[] = ['quarter', 'month', 'biweekly', 'week', 'day'];
  const currentIndex = scaleOrder.indexOf(scale);
  if (currentIndex < scaleOrder.length - 1) {
    setScale(scaleOrder[currentIndex + 1]);
  }
}, [scale]);

/**
 * ç¼©æ”¾ - ç¼©å°ï¼ˆå‡å°‘ç²¾åº¦ï¼‰
 * å¤© â†’ å‘¨ â†’ åŒå‘¨ â†’ æœˆ â†’ å­£åº¦
 */
const handleZoomOut = useCallback(() => {
  const scaleOrder: TimeScale[] = ['day', 'week', 'biweekly', 'month', 'quarter'];
  const currentIndex = scaleOrder.indexOf(scale);
  if (currentIndex < scaleOrder.length - 1) {
    setScale(scaleOrder[currentIndex + 1]);
  }
}, [scale]);

// ä½¿ç”¨
<Button size="small" icon={<ZoomInOutlined />} onClick={handleZoomIn} />
<Button size="small" icon={<ZoomOutOutlined />} onClick={handleZoomOut} />
```

**ç¼©æ”¾çº§åˆ«**:
```
æœ€ç²¾ç»† â†â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â†’ æœ€ç²—ç•¥
  å¤©  â†’  å‘¨  â†’  åŒå‘¨  â†’  æœˆ  â†’  å­£åº¦
```

---

#### **å®Œæ•´æ—¶é—´åˆ»åº¦é€‰æ‹©** âœ…

```typescript
<Segmented
  size="small"
  value={scale}
  onChange={(value) => setScale(value as TimeScale)}
  options={[
    { label: 'å¤©', value: 'day' },      // âœ… æ–°å¢
    { label: 'å‘¨', value: 'week' },     // âœ… æ–°å¢
    { label: 'åŒå‘¨', value: 'biweekly' }, // âœ… æ–°å¢
    { label: 'æœˆ', value: 'month' },
    { label: 'å­£åº¦', value: 'quarter' }, // âœ… æ–°å¢
  ]}
/>
```

---

## ğŸ“ æ—¶é—´åˆ»åº¦æŠ€æœ¯ç»†èŠ‚

### åŸºäº"å¤©"çš„ç»Ÿä¸€è®¡ç®—

**æ ¸å¿ƒåŸåˆ™**: æ‰€æœ‰ä½ç½®è®¡ç®—éƒ½åŸºäºæ—¥å†å¤©æ•°

```typescript
// 1. æ¯å¤©çš„åƒç´ æ•°ï¼ˆæ ¹æ®ç¼©æ”¾çº§åˆ«ï¼‰
getPixelsPerDay(scale):
  - day: 40px/å¤©      (ç²¾ç»†)
  - week: 40px/å¤©     (æŒ‰å‘¨åˆ†ç»„)
  - biweekly: 40px/å¤© (æŒ‰åŒå‘¨åˆ†ç»„)
  - month: 5px/å¤©     (å‹ç¼©)
  - quarter: 2.2px/å¤© (é«˜åº¦å‹ç¼©)

// 2. æ—¥æœŸ â†’ åƒç´ ä½ç½®
position = differenceInCalendarDays(date, viewStartDate) * pixelsPerDay

// 3. åƒç´ ä½ç½® â†’ æ—¥æœŸ
date = addDays(viewStartDate, Math.floor(position / pixelsPerDay))
```

**ç²¾åº¦ä¿è¯**:
- âœ… ä»»åŠ¡æ¡å®½åº¦ = æ—¥æœŸè·¨åº¦ Ã— æ¯å¤©åƒç´ æ•°
- âœ… ä»»åŠ¡æ¡ä½ç½® = èµ·å§‹æ—¥æœŸåç§» Ã— æ¯å¤©åƒç´ æ•°
- âœ… è¡¨å¤´åˆ—å®½åº¦ = åˆ»åº¦å•ä½ Ã— æ¯å¤©åƒç´ æ•°
- âœ… å®Œç¾å¯¹é½ï¼šä»»åŠ¡æ¡ä¸è¡¨å¤´åˆ—

---

### åˆ»åº¦å•ä½å®½åº¦

```typescript
getScaleUnit(scale):
  - day: 40px       (1å¤©)
  - week: 280px     (7å¤©)
  - biweekly: 560px (14å¤©)
  - month: 1200px   (30å¤©åä¹‰å€¼ï¼Œå®é™…28-31å¤©)
  - quarter: 3640px (91å¤©åä¹‰å€¼ï¼Œå®é™…89-92å¤©)
```

---

## ğŸ¨ å·¥å…·æ å®Œæ•´å¸ƒå±€

### å¸ƒå±€ç»“æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ [â†è¿”å›] [å·¥ç¨‹æ•ˆèƒ½è®¡åˆ’ âœï¸]                        [è´Ÿè´£äºº: XXX]    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ å·¦ä¾§å·¥å…·                              å³ä¾§æ“ä½œ                     â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ ç¼–è¾‘å›¾ Timeline èŠ‚ç‚¹    â”‚  â”‚ ä»Šå¤© + - [å¤©å‘¨åŒå‘¨æœˆå­£åº¦] ç”˜ç‰¹å›¾â–¼â”‚ â”‚
â”‚ â”‚ å…³é”®è·¯å¾„ æ’¤é”€ é‡åš ä¿å­˜  â”‚  â”‚ è¡¨æ ¼ çŸ©é˜µ è¿­ä»£è§„åˆ’ ç‰ˆæœ¬å¯¹æ¯”    â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

### æŒ‰é’®åŠŸèƒ½è¯´æ˜

| æŒ‰é’® | åŠŸèƒ½ | ä½ç½® |
|------|------|------|
| **è¿”å›** | è¿”å›åˆ—è¡¨é¡µ | å·¦ä¸Šè§’ |
| **æ ‡é¢˜** | å¯ç¼–è¾‘æ ‡é¢˜ï¼ˆç‚¹å‡»ç¼–è¾‘ï¼‰ | ä¸­é—´ |
| **è´Ÿè´£äºº** | æ˜¾ç¤ºè®¡åˆ’è´Ÿè´£äºº | å³ä¸Šè§’ |
| **ç¼–è¾‘å›¾** | è¿›å…¥/é€€å‡ºç¼–è¾‘æ¨¡å¼ | å·¦ä¾§ |
| **Timeline** | æ·»åŠ æ—¶é—´çº¿ | å·¦ä¾§ |
| **èŠ‚ç‚¹** | æ·»åŠ èŠ‚ç‚¹ï¼ˆä»»åŠ¡ã€é‡Œç¨‹ç¢‘ã€ç½‘å…³ï¼‰ | å·¦ä¾§ |
| **å…³é”®è·¯å¾„** | é«˜äº®å…³é”®è·¯å¾„ | å·¦ä¾§ |
| **æ’¤é”€** | æ’¤é”€ä¸Šä¸€æ­¥æ“ä½œ | å·¦ä¾§ |
| **é‡åš** | é‡åšä¸Šä¸€æ­¥æ“ä½œ | å·¦ä¾§ |
| **ä¿å­˜** | ä¿å­˜æ‰€æœ‰ä¿®æ”¹ | å·¦ä¾§ |
| **ä»Šå¤©** | å®šä½ç”»å¸ƒåˆ°ä»Šå¤© | å³ä¾§ |
| **+** | æ”¾å¤§ï¼ˆå¢åŠ ç²¾åº¦ï¼‰ | å³ä¾§ |
| **-** | ç¼©å°ï¼ˆå‡å°‘ç²¾åº¦ï¼‰ | å³ä¾§ |
| **å¤©/å‘¨/åŒå‘¨/æœˆ/å­£åº¦** | åˆ‡æ¢æ—¶é—´åˆ»åº¦ | å³ä¾§ |
| **ç”˜ç‰¹å›¾** | è§†å›¾ç±»å‹èœå• | å³ä¾§ |
| **è¡¨æ ¼** | è¡¨æ ¼è§†å›¾ | å³ä¾§ |
| **çŸ©é˜µ** | çŸ©é˜µè§†å›¾ | å³ä¾§ |
| **è¿­ä»£è§„åˆ’** | è¿­ä»£è§„åˆ’è§†å›¾ | å³ä¾§ |
| **ç‰ˆæœ¬å¯¹æ¯”** | ç‰ˆæœ¬å¯¹æ¯”è§†å›¾ | å³ä¾§ |

---

## ğŸš€ æ–°å¢åŠŸèƒ½è¯¦è§£

### åŠŸèƒ½ 1: ä»Šå¤©å®šä½ âœ…

**æŒ‰é’®**: `ä»Šå¤©`

**åŠŸèƒ½æµç¨‹**:
```
1. ç‚¹å‡»"ä»Šå¤©"æŒ‰é’®
   â†“
2. è®¡ç®—ä»Šå¤©åœ¨æ—¶é—´è½´ä¸Šçš„åƒç´ ä½ç½®
   position = getPositionFromDate(today, viewStartDate, scale)
   â†“
3. æ»šåŠ¨åˆ°ä»Šå¤©çš„ä½ç½®ï¼ˆå±…ä¸­æ˜¾ç¤ºï¼‰
   scrollLeft = position - containerWidth / 2
   â†“
4. ä½¿ç”¨å¹³æ»‘æ»šåŠ¨æ•ˆæœ
   scrollTo({ left: scrollLeft, behavior: 'smooth' })
```

**ä»£ç å®ç°**:
```typescript
const scrollToToday = useCallback(() => {
  if (!scrollContainerRef.current) return;
  
  const today = new Date();
  const position = getPositionFromDate(today, normalizedViewStartDate, scale);
  
  // æ»šåŠ¨åˆ°ä»Šå¤©çš„ä½ç½®ï¼Œå±…ä¸­æ˜¾ç¤º
  const containerWidth = scrollContainerRef.current.clientWidth;
  const scrollLeft = Math.max(0, position - containerWidth / 2 + SIDEBAR_WIDTH);
  
  scrollContainerRef.current.scrollTo({
    left: scrollLeft,
    behavior: 'smooth',
  });
}, [normalizedViewStartDate, scale]);
```

---

### åŠŸèƒ½ 2: ç¼©æ”¾åŠŸèƒ½ âœ…

**æŒ‰é’®**: `+` (æ”¾å¤§) / `-` (ç¼©å°)

**ç¼©æ”¾çº§åˆ«é¡ºåº**:
```
æœ€ç²¾ç»† â†â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â†’ æœ€ç²—ç•¥
  å¤©  â†’  å‘¨  â†’  åŒå‘¨  â†’  æœˆ  â†’  å­£åº¦
```

**æ”¾å¤§ï¼ˆ+ï¼‰**: å¢åŠ ç²¾åº¦
```
å­£åº¦ â†’ æœˆ â†’ åŒå‘¨ â†’ å‘¨ â†’ å¤©
(å·²ç»æ˜¯"å¤©"æ—¶ï¼ŒæŒ‰é’®ç¦ç”¨)
```

**ç¼©å°ï¼ˆ-ï¼‰**: å‡å°‘ç²¾åº¦
```
å¤© â†’ å‘¨ â†’ åŒå‘¨ â†’ æœˆ â†’ å­£åº¦
(å·²ç»æ˜¯"å­£åº¦"æ—¶ï¼ŒæŒ‰é’®ç¦ç”¨)
```

**ä»£ç å®ç°**:
```typescript
// æ”¾å¤§
const handleZoomIn = useCallback(() => {
  const scaleOrder: TimeScale[] = ['quarter', 'month', 'biweekly', 'week', 'day'];
  const currentIndex = scaleOrder.indexOf(scale);
  if (currentIndex < scaleOrder.length - 1) {
    setScale(scaleOrder[currentIndex + 1]);
  }
}, [scale]);

// ç¼©å°
const handleZoomOut = useCallback(() => {
  const scaleOrder: TimeScale[] = ['day', 'week', 'biweekly', 'month', 'quarter'];
  const currentIndex = scaleOrder.indexOf(scale);
  if (currentIndex < scaleOrder.length - 1) {
    setScale(scaleOrder[currentIndex + 1]);
  }
}, [scale]);
```

---

### åŠŸèƒ½ 3: å®Œæ•´åˆ»åº¦é€‰æ‹© âœ…

**ç»„ä»¶**: `Segmented`

**é€‰é¡¹**:
```typescript
options={[
  { label: 'å¤©', value: 'day' },      // âœ… 40px/å¤©
  { label: 'å‘¨', value: 'week' },     // âœ… 280px/å‘¨
  { label: 'åŒå‘¨', value: 'biweekly' }, // âœ… 560px/åŒå‘¨
  { label: 'æœˆ', value: 'month' },     // âœ… 1200px/æœˆ
  { label: 'å­£åº¦', value: 'quarter' },  // âœ… 3640px/å­£åº¦
]}
```

**åŠŸèƒ½**: ç›´æ¥åˆ‡æ¢åˆ°æŒ‡å®šçš„æ—¶é—´åˆ»åº¦

---

## ğŸ“‹ å®Œæ•´æµ‹è¯•æŒ‡å—

### æµ‹è¯• 1: æ—¶é—´åˆ»åº¦æ˜¾ç¤º

#### 1.1 æ—¥è§†å›¾
```
1. ç‚¹å‡»å³ä¸Šè§’"å¤©"æŒ‰é’®
2. æŸ¥çœ‹æ—¶é—´è½´è¡¨å¤´
   âœ… æ˜¾ç¤ºæ—¥æœŸæ•°å­—: 1, 2, 3, 4...
   âœ… å‘¨æœ«ï¼ˆå…­æ—¥ï¼‰æ˜¾ç¤ºç°è‰²èƒŒæ™¯
   âœ… æ¯æœˆ1å·ä¸‹æ–¹æ˜¾ç¤ºæœˆä»½æ ‡ç­¾
   âœ… åˆ—å®½ 40px
```

#### 1.2 å‘¨è§†å›¾
```
1. ç‚¹å‡»"å‘¨"æŒ‰é’®
2. æŸ¥çœ‹æ—¶é—´è½´è¡¨å¤´
   âœ… æ˜¾ç¤ºæ—¥æœŸèŒƒå›´: 12-18, 19-25, 26-1...
   âœ… åˆ—å®½ 280px
   âœ… ä»»åŠ¡æ¡æ­£ç¡®å¯¹é½
```

#### 1.3 åŒå‘¨è§†å›¾
```
1. ç‚¹å‡»"åŒå‘¨"æŒ‰é’®
2. æŸ¥çœ‹æ—¶é—´è½´è¡¨å¤´
   âœ… æ˜¾ç¤ºæ—¥æœŸèŒƒå›´: 1/12-25, 1/26-8...
   âœ… åˆ—å®½ 560px
   âœ… ä»»åŠ¡æ¡æ­£ç¡®å¯¹é½
```

#### 1.4 æœˆè§†å›¾
```
1. ç‚¹å‡»"æœˆ"æŒ‰é’®
2. æŸ¥çœ‹æ—¶é—´è½´è¡¨å¤´
   âœ… æ˜¾ç¤ºæ ¼å¼: 26å¹´1æœˆ, 26å¹´2æœˆ...
   âœ… åˆ—å®½çº¦ 1200px
   âœ… ä»»åŠ¡æ¡å‹ç¼©æ˜¾ç¤º
```

#### 1.5 å­£åº¦è§†å›¾
```
1. ç‚¹å‡»"å­£åº¦"æŒ‰é’®
2. æŸ¥çœ‹æ—¶é—´è½´è¡¨å¤´
   âœ… æ˜¾ç¤ºæ ¼å¼: Q1, Q2, Q3, Q4
   âœ… åˆ—å®½çº¦ 3640px
   âœ… ä»»åŠ¡æ¡é«˜åº¦å‹ç¼©
```

---

### æµ‹è¯• 2: ä»Šå¤©å®šä½åŠŸèƒ½

```
1. åˆ‡æ¢åˆ°"æœˆ"è§†å›¾ï¼ˆå‹ç¼©æ˜¾ç¤ºï¼‰
2. æ»šåŠ¨åˆ°æ—¶é—´è½´çš„æŸä¸ªä½ç½®
3. ç‚¹å‡»"ä»Šå¤©"æŒ‰é’®
   âœ… ç”»å¸ƒå¹³æ»‘æ»šåŠ¨
   âœ… ä»Šå¤©çš„ä½ç½®æ˜¾ç¤ºåœ¨å±å¹•ä¸­å¤®
   âœ… Today çº¢çº¿å¯è§ï¼ˆå¦‚æœä»Šå¤©åœ¨è§†å›¾èŒƒå›´å†…ï¼‰
```

---

### æµ‹è¯• 3: ç¼©æ”¾åŠŸèƒ½

#### 3.1 æ”¾å¤§æµ‹è¯•
```
1. åˆ‡æ¢åˆ°"å­£åº¦"è§†å›¾
2. ç‚¹å‡»"+"æŒ‰é’®
   âœ… åˆ‡æ¢åˆ°"æœˆ"è§†å›¾
3. å†æ¬¡ç‚¹å‡»"+"
   âœ… åˆ‡æ¢åˆ°"åŒå‘¨"è§†å›¾
4. ç»§ç»­ç‚¹å‡»"+"
   âœ… åŒå‘¨ â†’ å‘¨ â†’ å¤©
5. åœ¨"å¤©"è§†å›¾æ—¶ç‚¹å‡»"+"
   âœ… ä¿æŒ"å¤©"è§†å›¾ï¼ˆä¸å†æ”¾å¤§ï¼‰
```

#### 3.2 ç¼©å°æµ‹è¯•
```
1. åˆ‡æ¢åˆ°"å¤©"è§†å›¾
2. ç‚¹å‡»"-"æŒ‰é’®
   âœ… åˆ‡æ¢åˆ°"å‘¨"è§†å›¾
3. å†æ¬¡ç‚¹å‡»"-"
   âœ… åˆ‡æ¢åˆ°"åŒå‘¨"è§†å›¾
4. ç»§ç»­ç‚¹å‡»"-"
   âœ… åŒå‘¨ â†’ æœˆ â†’ å­£åº¦
5. åœ¨"å­£åº¦"è§†å›¾æ—¶ç‚¹å‡»"-"
   âœ… ä¿æŒ"å­£åº¦"è§†å›¾ï¼ˆä¸å†ç¼©å°ï¼‰
```

---

### æµ‹è¯• 4: è§†å›¾åˆ‡æ¢

```
1. ç‚¹å‡»"å¤©"æŒ‰é’® â†’ æŸ¥çœ‹ç²¾ç»†è§†å›¾
2. ç‚¹å‡»"å‘¨"æŒ‰é’® â†’ æŸ¥çœ‹å‘¨è§†å›¾
3. ç‚¹å‡»"æœˆ"æŒ‰é’® â†’ æŸ¥çœ‹æœˆè§†å›¾
4. è§‚å¯Ÿä»»åŠ¡æ¡è‡ªåŠ¨è°ƒæ•´ï¼š
   âœ… ä½ç½®æ­£ç¡®
   âœ… å®½åº¦æŒ‰æ¯”ä¾‹ç¼©æ”¾
   âœ… ä¸è¡¨å¤´åˆ—å¯¹é½
   âœ… ä¾èµ–å…³ç³»çº¿é‡æ–°è®¡ç®—
```

---

## ğŸ¯ å¯¹æ¯”åŸé¡¹ç›®

### æ—¶é—´åˆ»åº¦æ ¼å¼

| è§†å›¾ | åŸé¡¹ç›® | æ–°é¡¹ç›® | çŠ¶æ€ |
|------|--------|--------|------|
| å¤© | `6`, `7`, `8` | `6`, `7`, `8` | âœ… ä¸€è‡´ |
| å‘¨ | `12-18`, `19-25` | `12-18`, `19-25` | âœ… ä¸€è‡´ |
| åŒå‘¨ | `1/12-25` | `1/12-25` | âœ… ä¸€è‡´ |
| æœˆ | `26å¹´1æœˆ` | `26å¹´1æœˆ` | âœ… ä¸€è‡´ |
| å­£åº¦ | `Q1`, `Q2` | `Q1`, `Q2` | âœ… ä¸€è‡´ |

---

### å·¥å…·æ åŠŸèƒ½

| åŠŸèƒ½ | åŸé¡¹ç›® | æ–°é¡¹ç›® | çŠ¶æ€ |
|------|--------|--------|------|
| è¿”å›æŒ‰é’® | âœ… | âœ… | âœ… ä¸€è‡´ |
| å¯ç¼–è¾‘æ ‡é¢˜ | âœ… | âœ… | âœ… ä¸€è‡´ |
| è´Ÿè´£äººæ˜¾ç¤º | âœ… | âœ… | âœ… ä¸€è‡´ |
| ä»Šå¤©å®šä½ | âœ… | âœ… | âœ… ä¸€è‡´ |
| +/- ç¼©æ”¾ | âœ… | âœ… | âœ… ä¸€è‡´ |
| å¤©/å‘¨/åŒå‘¨/æœˆ/å­£åº¦ | âœ… | âœ… | âœ… ä¸€è‡´ |
| è§†å›¾ç±»å‹åˆ‡æ¢ | âœ… | âœ… | âœ… ä¸€è‡´ |

---

## âœ… éªŒè¯ç»“æœ

### ä»£ç è´¨é‡

```bash
âœ… TypeScript: 0 é”™è¯¯
âœ… ESLint: 0 è­¦å‘Š
âœ… ç±»å‹æ£€æŸ¥: é€šè¿‡
âœ… HMR: æ­£å¸¸æ›´æ–°
```

### åŠŸèƒ½å®Œæ•´æ€§

```
âœ… 5 ç§æ—¶é—´åˆ»åº¦ï¼ˆå¤©/å‘¨/åŒå‘¨/æœˆ/å­£åº¦ï¼‰
âœ… ä»Šå¤©å®šä½åŠŸèƒ½
âœ… +/- ç¼©æ”¾åŠŸèƒ½
âœ… å‘¨æœ«é«˜äº®ï¼ˆæ—¥è§†å›¾ï¼‰
âœ… æœˆä»½æ ‡è®°ï¼ˆæ—¥è§†å›¾ï¼‰
âœ… å¹³æ»‘æ»šåŠ¨åŠ¨ç”»
âœ… è‡ªåŠ¨å¯¹é½ä¿è¯
```

---

## ğŸ“Š ä¿®æ”¹ç»Ÿè®¡

### ä¿®æ”¹çš„æ–‡ä»¶

| æ–‡ä»¶ | ä¿®æ”¹å†…å®¹ | è¡Œæ•° |
|------|----------|------|
| `dateUtils.ts` | è°ƒæ•´æœˆè§†å›¾æ ¼å¼ | 4è¡Œ |
| `TimelinePanel.tsx` | æ·»åŠ ç¼©æ”¾åŠŸèƒ½ | +50è¡Œ |
| `TimelinePanel.tsx` | é‡æ–°è®¾è®¡å·¥å…·æ  | +30è¡Œ |
| `TimelinePanel.tsx` | å¢å¼ºæ—¶é—´è½´è¡¨å¤´ | +15è¡Œ |
| **æ€»è®¡** | - | +99è¡Œ |

---

## ğŸ‰ æ€»ç»“

### å®Œæˆçš„åŠŸèƒ½

```
âœ… æ—¶é—´è½´åˆ»åº¦ï¼š5 ç§è§†å›¾å…¨éƒ¨å®ç°
âœ… æ—¥æœŸæ˜¾ç¤ºï¼šä¸åŸé¡¹ç›®å®Œå…¨ä¸€è‡´
âœ… ä»Šå¤©å®šä½ï¼šç‚¹å‡»å±…ä¸­æ˜¾ç¤º
âœ… +/- ç¼©æ”¾ï¼šæ™ºèƒ½åˆ‡æ¢åˆ»åº¦
âœ… åˆ»åº¦é€‰æ‹©ï¼š5 ä¸ªé€‰é¡¹å®Œæ•´
âœ… å‘¨æœ«é«˜äº®ï¼šæ—¥è§†å›¾ç°è‰²èƒŒæ™¯
âœ… æœˆä»½æ ‡è®°ï¼šæ¯æœˆ1å·æ˜¾ç¤º
âœ… å·¥å…·æ å¸ƒå±€ï¼šæŒ‰åŸé¡¹ç›®è¿˜åŸ
```

### æŠ€æœ¯ä¿è¯

```
âœ… åŸºäº"å¤©"å•ä½ï¼šæ‰€æœ‰è®¡ç®—ç»Ÿä¸€
âœ… ç²¾ç¡®å¯¹é½ï¼šä»»åŠ¡æ¡ä¸è¡¨å¤´åˆ—
âœ… å¹³æ»‘åŠ¨ç”»ï¼šæ»šåŠ¨å’Œåˆ‡æ¢
âœ… æ€§èƒ½ä¼˜åŒ–ï¼šuseMemo ç¼“å­˜
âœ… ç±»å‹å®‰å…¨ï¼š100% TypeScript
```

---

**å®Œæˆæ—¶é—´**: 2026-02-03 15:50  
**ç‰ˆæœ¬**: v2.1.0  
**çŠ¶æ€**: âœ… å…¨éƒ¨å®Œæˆ  

**ç°åœ¨è¯·åˆ·æ–°é¡µé¢æµ‹è¯•ï¼** ğŸš€

---

## ğŸ§ª å¿«é€Ÿæµ‹è¯•

```
1. åˆ·æ–°é¡µé¢ (F5)
2. è¿›å…¥ä»»æ„è®¡åˆ’è¯¦æƒ…é¡µ
3. æµ‹è¯•ç¼©æ”¾ï¼š
   - ç‚¹å‡»"å­£åº¦" â†’ æŸ¥çœ‹å‹ç¼©è§†å›¾
   - ç‚¹å‡»"+" 5æ¬¡ â†’ é€æ­¥æ”¾å¤§åˆ°"å¤©"è§†å›¾
   - ç‚¹å‡»"-" 5æ¬¡ â†’ é€æ­¥ç¼©å°åˆ°"å­£åº¦"è§†å›¾
4. æµ‹è¯•å®šä½ï¼š
   - æ»šåŠ¨åˆ°å…¶ä»–ä½ç½®
   - ç‚¹å‡»"ä»Šå¤©" â†’ è‡ªåŠ¨æ»šåŠ¨åˆ°ä»Šå¤©
5. éªŒè¯è¡¨å¤´ï¼š
   - æ¯ä¸ªè§†å›¾çš„æ—¥æœŸæ ¼å¼
   - å‘¨æœ«é«˜äº®ï¼ˆæ—¥è§†å›¾ï¼‰
   - æœˆä»½æ ‡è®°ï¼ˆæ—¥è§†å›¾æ¯æœˆ1å·ï¼‰
```

æ‰€æœ‰åŠŸèƒ½å·²å®ç°ï¼ğŸŠ
