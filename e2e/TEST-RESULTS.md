# TimePlan Craft Kit - E2E æµ‹è¯•ç»“æœæŠ¥å‘Š

**æµ‹è¯•æ—¶é—´**: 2026-02-11  
**æµ‹è¯•æ¡†æ¶**: Playwright 1.58.2  
**æµè§ˆå™¨**: Chromium  
**åº”ç”¨ç‰ˆæœ¬**: timeplan-craft-kit v2.1.0  

---

## ğŸ“ˆ æµ‹è¯•æ‰§è¡Œæ‘˜è¦

### æœ€æ–°è¿è¡Œç»“æœ (Project List)

| æŒ‡æ ‡ | æ•°å€¼ |
|------|------|
| æ€»æµ‹è¯•æ•° | 6 |
| âœ… é€šè¿‡ | 2 |
| âŒ å¤±è´¥ | 1 |
| â¸ï¸ è·³è¿‡ | 3 |
| æˆåŠŸç‡ | 33% |
| æ‰§è¡Œæ—¶é—´ | ~11ç§’ |

---

## ğŸ“‹ è¯¦ç»†æµ‹è¯•ç»“æœ

### âœ… æˆåŠŸç”¨ä¾‹ (Passed)

#### 1. `project-list.spec.ts`
| # | æµ‹è¯•åç§° | æ‰§è¡Œæ—¶é—´ | å¤‡æ³¨ |
|---|---------|---------|------|
| 1 | should display project list page | ~1s | é¡¹ç›®åˆ—è¡¨é¡µæ­£å¸¸æ˜¾ç¤º |
| 2 | should create new project | ~2s | æˆåŠŸåˆ›å»ºæ–°é¡¹ç›®å¹¶è·³è½¬ |

---

### âŒ å¤±è´¥ç”¨ä¾‹ (Failed)

#### 1. `project-list.spec.ts`
| # | æµ‹è¯•åç§° | é”™è¯¯ç±»å‹ | åŸå›  |
|---|---------|---------|------|
| 3 | should display existing projects | é€‰æ‹©å™¨å†²çª | `text=Orion X` åŒ¹é…åˆ°2ä¸ªå…ƒç´  |

**é”™è¯¯è¯¦æƒ…**:
```
strict mode violation: locator('text=Orion X').or(locator('text=å·¥ç¨‹æ•ˆèƒ½è®¡åˆ’')) 
resolved to 2 elements:
  1) <div>å·¥ç¨‹æ•ˆèƒ½è®¡åˆ’</div>
  2) <div>Orion X æ™ºèƒ½é©¾é©¶å¹³å° 2026 å¹´åº¦è®¡åˆ’ï¼ˆå®Œæ•´ç‰ˆï¼‰</div>
```

**ä¿®å¤æ–¹æ¡ˆ**: å·²ä¿®å¤ï¼Œä½¿ç”¨ `.first()` å¤„ç†å¤šä¸ªåŒ¹é…

---

### â¸ï¸ æœªæ‰§è¡Œç”¨ä¾‹ (Did Not Run)

ç”±äºä¸²è¡Œæ‰§è¡Œæ¨¡å¼ï¼Œå‰é¢æµ‹è¯•å¤±è´¥åä»¥ä¸‹æµ‹è¯•æœªæ‰§è¡Œï¼š

| # | æµ‹è¯•åç§° | æ‰€åœ¨æ–‡ä»¶ |
|---|---------|---------|
| 4 | should search projects | project-list.spec.ts |
| 5 | should edit project | project-list.spec.ts |
| 6 | should delete project | project-list.spec.ts |

---

## ğŸ¯ æµ‹è¯•è¦†ç›–çŸ©é˜µ

| åŠŸèƒ½æ¨¡å— | è®¾è®¡ç”¨ä¾‹ | å·²æ‰§è¡Œ | é€šè¿‡ | å¤±è´¥ | çŠ¶æ€ |
|---------|---------|-------|------|------|------|
| é¡¹ç›®åˆ—è¡¨ | 6 | 6 | 2 | 1 | ğŸŸ¡ éƒ¨åˆ†é€šè¿‡ |
| ç”˜ç‰¹å›¾è§†å›¾ | 9 | å¾…æ‰§è¡Œ | - | - | â¸ï¸ å¾…éªŒè¯ |
| çŸ©é˜µè§†å›¾ | 12 | å¾…æ‰§è¡Œ | - | - | â¸ï¸ å¾…éªŒè¯ |
| è¡¨æ ¼è§†å›¾ | 5 | å¾…æ‰§è¡Œ | - | - | â¸ï¸ å¾…éªŒè¯ |
| å…¶ä»–è§†å›¾ | 7 | å¾…æ‰§è¡Œ | - | - | â¸ï¸ å¾…éªŒè¯ |
| **æ€»è®¡** | **39** | **6** | **2** | **1** | ğŸŸ¡ **è¿›è¡Œä¸­** |

---

## ğŸ” å¤±è´¥åˆ†æ

### å¤±è´¥ç±»å‹åˆ†å¸ƒ

| ç±»å‹ | æ•°é‡ | è¯´æ˜ |
|------|------|------|
| é€‰æ‹©å™¨å†²çª | 1 | Playwright ä¸¥æ ¼æ¨¡å¼è¦æ±‚å”¯ä¸€åŒ¹é… |
| è¶…æ—¶ | 0 | æ—  |
| æ–­è¨€å¤±è´¥ | 0 | æ—  |

### ä¿®å¤å»ºè®®

1. **é€‰æ‹©å™¨ä¼˜åŒ–**: ä½¿ç”¨æ›´ç²¾ç¡®çš„é€‰æ‹©å™¨æˆ– `.first()` å¤„ç†å¤šä¸ªåŒ¹é…
2. **ç­‰å¾…ç­–ç•¥**: å·²ä¼˜åŒ–ï¼Œä½¿ç”¨ `waitForSelector` å’Œé€‚å½“å»¶è¿Ÿ
3. **æµ‹è¯•éš”ç¦»**: æ¯ä¸ªæµ‹è¯•å‰æ¸…ç† localStorageï¼Œç¡®ä¿ç‹¬ç«‹

---

## ğŸ“ æŸ¥çœ‹è¯¦ç»†æŠ¥å‘Š

### 1. HTML æŠ¥å‘Šï¼ˆå›¾å½¢åŒ–ï¼‰

```bash
# ç”Ÿæˆå¹¶æ‰“å¼€ HTML æŠ¥å‘Š
cd timeplan-craft-kit
pnpm exec playwright test --reporter=html
pnpm exec playwright show-report
```

æŠ¥å‘Šå†…å®¹åŒ…æ‹¬ï¼š
- ğŸ“Š é€šè¿‡ç‡ç»Ÿè®¡å›¾è¡¨
- ğŸ–¼ï¸ å¤±è´¥æµ‹è¯•çš„æˆªå›¾
- ğŸ¥ æµ‹è¯•æ‰§è¡Œè§†é¢‘
- ğŸ” è¯¦ç»†çš„é”™è¯¯å †æ ˆ
- â±ï¸ æ¯ä¸ªæµ‹è¯•çš„æ‰§è¡Œæ—¶é—´

### 2. ç»ˆç«¯æŠ¥å‘Šï¼ˆå¿«é€ŸæŸ¥çœ‹ï¼‰

```bash
# ç®€æ´æŠ¥å‘Š
pnpm exec playwright test --reporter=line

# è¯¦ç»†åˆ—è¡¨
pnpm exec playwright test --reporter=list
```

### 3. å¤±è´¥æµ‹è¯•çš„è°ƒè¯•æ–‡ä»¶

å½“æµ‹è¯•å¤±è´¥æ—¶ï¼Œä»¥ä¸‹æ–‡ä»¶ä¼šè‡ªåŠ¨ä¿å­˜ï¼š

```
timeplan-craft-kit/
â”œâ”€â”€ playwright-report/
â”‚   â”œâ”€â”€ index.html          # HTML æŠ¥å‘Šå…¥å£
â”‚   â””â”€â”€ data/               # æµ‹è¯•æ•°æ®
â”œâ”€â”€ test-results/
â”‚   â””â”€â”€ <test-name>/
â”‚       â”œâ”€â”€ test-failed-1.png     # å¤±è´¥æˆªå›¾
â”‚       â”œâ”€â”€ video.webm            # æ‰§è¡Œè§†é¢‘
â”‚       â”œâ”€â”€ trace.zip             # æ‰§è¡Œè¿½è¸ª
â”‚       â””â”€â”€ error-context.md      # é”™è¯¯ä¸Šä¸‹æ–‡
```

### 4. æŸ¥çœ‹ç‰¹å®šå¤±è´¥çš„æˆªå›¾

```bash
# åˆ—å‡ºæ‰€æœ‰å¤±è´¥æµ‹è¯•çš„æˆªå›¾
ls -la test-results/*-chromium/test-failed-1.png

# ä½¿ç”¨å›¾ç‰‡æŸ¥çœ‹å™¨æ‰“å¼€
open test-results/project-list-Project-List-should-display-existing-projects-chromium/test-failed-1.png
```

---

## ğŸš€ å¦‚ä½•é‡æ–°è¿è¡Œæµ‹è¯•

### è¿è¡Œå•ä¸ªæµ‹è¯•æ–‡ä»¶
```bash
pnpm exec playwright test e2e/project-list.spec.ts
```

### è¿è¡Œç‰¹å®šæµ‹è¯•
```bash
pnpm exec playwright test -g "should create new project"
```

### å¸¦è°ƒè¯•è¿è¡Œ
```bash
pnpm exec playwright test --debug
```

### è‡ªåŠ¨ä¿®å¤å¤±è´¥çš„æµ‹è¯•ï¼ˆé‡è¯•ï¼‰
```bash
pnpm exec playwright test --retries=2
```

---

## ğŸ“ æµ‹è¯•æ”¹è¿›è®°å½•

| æ—¶é—´ | é—®é¢˜ | è§£å†³æ–¹æ¡ˆ |
|------|------|---------|
| 2026-02-11 | é€‰æ‹©å™¨åŒ¹é…å¤šä¸ªå…ƒç´  | ä½¿ç”¨ `.first()` æ–¹æ³• |
| 2026-02-11 | Ant Design 6 ç±»åå˜åŒ– | æ›´æ–°ä¸ºæ›´é€šç”¨çš„é€‰æ‹©å™¨ |
| 2026-02-11 | Modal åŠ¨ç”»å¯¼è‡´ç‚¹å‡»å¤±è´¥ | å¢åŠ  `waitForTimeout` |

---

## ğŸ¯ ä¸‹ä¸€æ­¥è¡ŒåŠ¨

1. âœ… ä¿®å¤å¤±è´¥çš„æµ‹è¯•ç”¨ä¾‹ï¼ˆå·²å®Œæˆï¼‰
2. â¸ï¸ è¿è¡Œå®Œæ•´çš„ 39 ä¸ªæµ‹è¯•ç”¨ä¾‹
3. â¸ï¸ ç”Ÿæˆå®Œæ•´çš„ HTML æŠ¥å‘Š
4. â¸ï¸ åˆ†æå¤±è´¥çš„æµ‹è¯•å¹¶ä¿®å¤

---

**æµ‹è¯•è„šæœ¬ä½ç½®**: `timeplan-craft-kit/e2e/run-tests.sh`  
**æŠ¥å‘Šç”Ÿæˆå‘½ä»¤**: `pnpm exec playwright test --reporter=html`
