# 甘特图 V4 快速测试指南

## 🎯 测试目标
验证 V4 修复的 3 个核心问题：
1. 拖拽手柄超明显可见 ✅
2. 拖拽宽度严格按天对齐 ✅
3. 磁吸标签清晰可见 ✅
4. 时间轴范围 2024-2028 全覆盖 ✅

---

## ⚡ 快速测试流程

### 测试 1️⃣: 拖拽手柄可见性（30秒）

#### 操作步骤
1. 打开时间计划详情页
2. 点击右上角 **"编辑模式"** 按钮
3. 在甘特图中点击任意一条蓝色bar
4. **观察左右两端**

#### ✅ 预期效果
- [ ] 看到 **蓝色半透明区域**（12px宽）
- [ ] 看到 **实心蓝色竖线**（4px宽）在区域边缘
- [ ] 蓝色线有 **发光效果**
- [ ] 鼠标移到手柄上，变为 **双向箭头光标** ↔️
- [ ] hover时，半透明区域颜色加深

#### ❌ 如果失败
- 手柄不明显 → 截图反馈
- 没有发光效果 → 检查是否选中了Line

---

### 测试 2️⃣: 拖拽宽度对齐（1分钟）

#### 操作步骤
1. 在编辑模式下，选中一个 Line
2. 拖拽 **右侧手柄** 向右移动
3. **松开鼠标**
4. 查看 Line 的宽度变化

#### ✅ 预期效果
- [ ] 拖拽过程中，宽度以 **整天** 为单位变化（不会出现半天）
- [ ] 释放后，Line 的 **右边缘** 严格对齐到时间轴的 **网格线**
- [ ] **月视图**：对齐到月份边界
- [ ] **周视图**：对齐到周一
- [ ] **双周视图**：对齐到双周起点
- [ ] **日视图**：对齐到每天的边界
- [ ] 拖拽后，Line **不会超出** 视觉上的网格位置

#### ❌ 如果失败
- 宽度不对齐 → 记录当前 scale（月/周/双周/日）
- 超出网格 → 截图标注错误位置

---

### 测试 3️⃣: 磁吸标签显示（1分钟）

#### 操作步骤
1. 在编辑模式下，选中一个 Line
2. 找到另一个 **Gateway**（菱形）或 **Milestone**（三角）
3. 拖拽 Line 的手柄，**接近** Gateway/Milestone 的日期
4. **观察屏幕中央**

#### ✅ 预期效果
- [ ] 当距离 ≤ 1天时，出现 **红色发光竖线**（4px宽）
- [ ] 红线上方显示 **白色标签** "🧲 磁吸对齐"
- [ ] 红线从 **时间轴顶部延伸到底部**
- [ ] 标签有 **白色边框** 和阴影
- [ ] 释放鼠标后，Line 自动 **对齐到目标日期**

#### 🔍 调试（如果标签不显示）
1. 打开浏览器 **开发者工具**（F12）
2. 切换到 **Console** 标签
3. 拖拽手柄接近其他元素
4. 查找日志：`[TimelinePanel] 🧲 显示磁吸指示线:`
   - **有日志** → 说明逻辑正常，可能是渲染问题
   - **无日志** → 说明磁吸逻辑未触发

#### ❌ 如果失败
- 看不到红线 → Console有日志？截图
- 标签位置不对 → 标注预期位置

---

### 测试 4️⃣: 时间轴范围 2024-2028（1分钟）

#### 操作步骤
1. 打开时间计划详情页
2. 切换到 **月视图**（右上角切换按钮）
3. **横向滚动** 时间轴到最左边
4. 记录显示的年份
5. **横向滚动** 时间轴到最右边
6. 记录显示的年份
7. 切换到 **周视图**，重复步骤 3-6
8. 切换到 **双周视图**，重复步骤 3-6

#### ✅ 预期效果
- [ ] **所有视图（月/周/双周/日/季度）** 最左边都显示 **2024年**
- [ ] **所有视图** 最右边都显示 **2028年**
- [ ] 时间轴顶部显示年份标签：**2024, 2025, 2026, 2027, 2028**
- [ ] 即使当前日期不在 2024-2028 范围内，时间轴仍然覆盖这个固定范围
- [ ] 无论是否有 Line 元素，时间轴范围保持不变

#### ❌ 如果失败
- 显示其他年份 → 记录具体年份和视图类型
- 范围不完整 → 截图标注缺失部分

---

## 📸 测试截图要求

如果发现问题，请提供以下截图：

### 手柄问题
- [ ] 选中 Line 后的全屏截图
- [ ] 放大手柄区域的截图（鼠标hover状态）

### 对齐问题
- [ ] 拖拽前的截图（标注Line右边缘位置）
- [ ] 拖拽后的截图（标注Line右边缘位置）
- [ ] 时间轴网格线的截图（标注对齐情况）

### 磁吸问题
- [ ] 拖拽到目标位置的截图
- [ ] Console日志的截图（包含 `[TimelinePanel]` 日志）
- [ ] 标注预期红线和标签的位置

### 时间轴范围问题
- [ ] 滚动到最左边的截图（显示年份）
- [ ] 滚动到最右边的截图（显示年份）
- [ ] 不同视图的时间轴对比（月/周/双周）

---

## ⏱️ 预计测试时间

| 测试项 | 时间 |
|--------|------|
| 手柄可见性 | 30秒 |
| 拖拽对齐 | 1分钟 |
| 磁吸标签 | 1分钟 |
| 时间轴范围 | 1分钟 |
| **总计** | **约 4 分钟** |

---

## 🎉 测试通过标准

所有 checkbox 都勾选 ✅，即表示 V4 修复成功！

---

## 📝 反馈模板

如果发现问题，请按以下格式反馈：

```
【测试项】: 拖拽手柄可见性
【问题描述】: 手柄不够明显，没有发光效果
【当前状态】: [附上截图]
【预期状态】: 左右两端应该有蓝色竖线 + 发光
【浏览器】: Chrome 120
【操作系统】: macOS 14.0
【时间视图】: 月视图
```

期待您的测试结果！ 🚀
