# 快速测试指南 V3

**测试日期**: 2026-02-08  
**版本**: V3 (最终修复版)

---

## 快速启动

```bash
cd timeplan-craft-kit
npm run dev
# 访问: http://localhost:9088/orion-x-2026-full-v3
```

---

## 5项功能验证

### ✅ 1. 背景颜色（已OK，无需测试）

**状态**: ✅ 用户确认OK

---

### ✅ 2. 拖拽手柄（现在可见）

**测试步骤**:
1. 点击"编辑"按钮
2. 点击选中任一Bar（例如"E0 架构概念设计"）
3. **观察Bar两端**，应该看到**蓝色竖条**

**预期效果**:
```
[▌████████████████████████▐]
 ↑                        ↑
蓝色手柄              蓝色手柄
(在Bar内部)          (在Bar内部)
```

**手柄特征**:
- 位置：Bar内部，距离边缘2px
- 颜色：半透明蓝色 + 蓝色粗边框
- 大小：8px宽，hover时12px
- 高度：占满Bar高度

**检查点**:
- [ ] 看到两端蓝色竖条
- [ ] 鼠标移到竖条上变宽
- [ ] 光标变为 ↔ (ew-resize)

---

### ✅ 3. 磁吸视觉反馈（现在可见）

**测试步骤**:
1. 进入编辑模式
2. 选中一个Bar
3. 拖拽右端接近一个Milestone或Gateway
4. **观察屏幕**，应该看到**红色竖线和标签**

**预期效果**:
```
    🧲 磁吸对齐  ← 红色标签
        ║
[Bar==] ║ [◆ Gateway]
        ║
     红色发光线
```

**指示线特征**:
- 颜色：红色 (#ff4d4f)
- 宽度：3px
- 发光：红色光晕
- 标签：白边、"🧲 磁吸对齐"

**检查点**:
- [ ] 接近其他元素时出现红色竖线
- [ ] 竖线带发光效果
- [ ] 显示"🧲 磁吸对齐"标签
- [ ] 松开鼠标后竖线消失

---

### ✅ 4. 基线Hover（橙色标签样式）

**测试步骤**:
1. 进入编辑模式
2. 鼠标移到任一基线标签上
3. **观察标签右侧**，应该显示**两个白底图标**

**预期效果（参考截图1）**:
```
┃ [FC3 需求锁定 3/31] [✎] [🗑]
   ↑                  ↑   ↑
  橙色标签           白底  白底
                    橙图标 红图标
```

**标签特征**:
- 背景色：橙色 (#fa8c16)
- 文字：白色，粗体
- 内容：名称 + 日期

**图标特征**:
- 背景：白色
- 边框：灰色
- 大小：32×32px
- 编辑图标：橙色
- 删除图标：红色

**检查点**:
- [ ] 标签是橙色横向布局
- [ ] 标签内显示名称和日期
- [ ] hover显示两个白底图标
- [ ] 编辑图标是橙色
- [ ] 删除图标是红色

---

### ✅ 5. Gateway/Milestone图形（放大+外圈）

**测试步骤**:
1. 查看甘特图中的Milestone和Gateway
2. **验证图形尺寸**: 应该是24px（比之前大）
3. 点击选中一个Gateway或Milestone
4. **观察选中效果**: 应该有**青色圆形外圈**

**预期效果（参考截图2和3）**:

**Milestone（倒三角）**:
```
默认:          选中:
   ▽          ╭───────╮
  ╱ ╲        │   ▽   │  ← 40px青色外圈
 ╱   ╲       │  ╱ ╲  │
╱─────╲      │ ╱   ╲ │
24px         ╰───────╯
```

**Gateway（菱形）**:
```
默认:          选中:
    ◆         ╭───────╮
   ███       │   ◆   │  ← 40px青色外圈
  █████      │  ███  │
 ███████     │ █████ │
  █████      │  ███  │
   ███        ╰───────╯
24px
```

**连线点**:
```
V2: ●(16px)  ← 太大，遮挡图形
V3: ●(10px)  ← 缩小，不遮挡
```

**检查点**:
- [ ] Milestone是倒三角形（▽）
- [ ] Gateway是实心菱形（◆）
- [ ] 图形大小约24px
- [ ] 选中时有青色圆形外圈（40px）
- [ ] 连线点小（10px）
- [ ] 图形清晰可见，不被遮挡

---

## 完整测试流程（5分钟）

### 步骤1: 启动应用
```bash
cd timeplan-craft-kit
npm run dev
```

### 步骤2: 打开测试页面
```
http://localhost:9088/orion-x-2026-full-v3
```

### 步骤3: 验证背景色
- 查看右侧甘特图区域
- 每行Timeline有淡彩色背景

### 步骤4: 验证拖拽手柄
- 点击"编辑"
- 选中一个Bar
- 看到两端蓝色手柄
- 尝试拖拽改变长度

### 步骤5: 验证磁吸效果
- 拖拽Bar接近Milestone
- 看到红色指示线
- 看到"🧲 磁吸对齐"标签

### 步骤6: 验证基线Hover
- Hover任一基线
- 看到橙色标签
- 右侧看到白底编辑/删除图标

### 步骤7: 验证图形
- 查看Milestone（倒三角，24px）
- 查看Gateway（菱形，24px）
- 点击选中，看到青色外圈
- 连线点小（10px）

---

## 问题排查

### 如果拖拽手柄看不见

**检查**:
1. 确认已进入编辑模式
2. 确认Bar已被选中（有边框）
3. 使用开发者工具检查手柄元素：
   ```javascript
   // 应该能找到蓝色手柄
   const handles = document.querySelectorAll('[style*="ew-resize"]');
   console.log('手柄数量:', handles.length);
   ```

### 如果磁吸线不显示

**检查**:
1. 确认正在拖拽（resize）
2. 确认接近其他元素（<1天）
3. 检查Console：
   ```javascript
   // 应该有magneticSnapInfo
   console.log('磁吸信息:', magneticSnapInfo);
   ```

### 如果图形看不见

**检查**:
1. 使用开发者工具检查SVG元素
2. 验证viewBox和points
3. 检查z-index和opacity

---

## 完成标志

✅ **全部通过标准**:
1. 右侧甘特图区域有背景色
2. 拖拽手柄在Bar内部可见（蓝色）
3. 磁吸时显示红色指示线
4. 基线hover显示橙色标签和白底图标
5. Gateway/Milestone图形清晰，选中有外圈
6. 连线点小，不遮挡图形
7. 无Console错误
8. 所有原有功能正常

---

**测试人**: _____  
**测试时间**: _____  
**测试结果**: [ ] 全部通过 / [ ] 部分通过 / [ ] 需继续修复
